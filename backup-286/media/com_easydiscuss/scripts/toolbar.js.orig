EasyDiscuss.module("toolbar",function(e){var t=this;EasyDiscuss.require().script("responsive").done(function(e){EasyDiscuss.Controller("Toolbar",{defaultOptions:{"{items}":".toolbarItem","{dropdowns}":".dropdown-menu","{notificationLink}":".notificationLink","{notificationDropDown}":".notificationDropDown","{notificationResult}":".notificationResult","{notificationItems}":".notificationItem","{notificationLoader}":".notificationLoader","{messageLink}":".messageLink","{messageDropDown}":".messageDropDown","{messageResult}":".messageResult","{messageLoader}":".messageLoader","{messageItems}":".messageItem","{logoutForm}":"#logoutForm","{logoutButton}":".logoutButton","{loginLink}":".loginLink","{loginDropDown}":".loginDropDown","{profileLink}":".profileLink","{profileDropDown}":".profileDropDown"}},function(t){return{init:function(){e.responsive(t.element,{elementWidth:function(){return t.element.outerWidth(!0)-15},conditions:{at:function(){var n=0;return t.items().each(function(t,r){n+=e(r).outerWidth(!0)}),n}(),alsoSwitch:{".dc_toolbar-wrapper":"narrow",".dc-button":"show","#dc_toolbar":"hidden-height"}}})},"{logoutButton} click":function(){t.logoutForm().submit()},"{loginLink} click":function(){t.messageDropDown().hide(),t.notificationDropDown().hide(),t.loginDropDown().toggle()},"{profileLink} click":function(){t.messageDropDown().hide(),t.notificationDropDown().hide(),t.profileDropDown().toggle()},"{messageLink} click":function(){t.profileDropDown().hide(),t.notificationDropDown().hide();if(t.messageDropDown().css("display")=="none"){var n={};n[e(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.conversation.load",n,{beforeSend:function(){t.messageLoader().show(),t.messageItems().remove()},success:function(e){t.messageLoader().hide(),t.messageResult().append(e)}})}t.messageDropDown().toggle()},"{notificationLink} click":function(){t.messageDropDown().hide(),t.profileDropDown().hide();if(t.notificationDropDown().css("display")=="none"){var n={};n[e(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.notifications.load",n,{beforeSend:function(){t.notificationLoader().show(),t.notificationItems().remove()},success:function(e){t.notificationLoader().hide(),t.notificationResult().append(e)}})}t.notificationDropDown().toggle()}}}),t.resolve()})});